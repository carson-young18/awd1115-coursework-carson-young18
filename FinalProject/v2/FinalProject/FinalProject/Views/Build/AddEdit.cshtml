@model BuildViewModel
@{
	ViewBag.Title = $"{ViewBag.Operation} Build";
}

<h1>@ViewBag.Operation Build</h1>

<form asp-action="AddEdit" method="post">
	<input type="hidden" asp-for="Build.BuildId" />

	<div class="form-group mb-2">
		<label asp-for="Build.Name"></label>
		<input asp-for="Build.Name" class="form-control" />
		<span asp-validation-for="Build.Name" class="text-danger"></span>
	</div>
	<div class="row mb-2">
		<div class="col">
			<label asp-for="Build.CategoryId" class="form-label">Category</label>
			<select asp-for="Build.CategoryId" class="form-select" asp-items="@(new SelectList(Model.Categories ?? Enumerable.Empty<Category>(), "CategoryId", "Name"))">
				<option value="">Choose a Category</option>
			</select>
			<span asp-validation-for="Build.CategoryId" class="text-danger"></span>
		</div>
		<div class="col">
			<label asp-for="Build.ChampionId" class="form-label">Champion</label>
			<select asp-for="Build.ChampionId" class="form-select" asp-items="@(new SelectList(Model.Champions ?? Enumerable.Empty<Champion>(), "ChampionId", "Name"))">
				<option value="">Choose a Champion</option>
			</select>
			<span asp-validation-for="Build.ChampionId" class="text-danger"></span>
		</div>
	</div>
	<div class="row mb-2">
		<div class="form-check-inline">
			@if (Model.Items != null)
			{
				foreach (Item item in Model.Items)
				{
					bool isChecked = Model.Build?.BuildItems != null && Model.Build.BuildItems.Any(i => i.ItemId == item.ItemId);
					<input type="checkbox" class="form-check-input" id="item-@item.ItemId" name="ItemIds" value="@item.ItemId"
						   @(isChecked ? "checked" : "") />
					<label class="form-check-label" for="item-@item.ItemId">@item.Name</label>
				}
			}
		</div>
	</div>
	<button type="submit" class="btn btn-primary">Save</button>
	<a asp-action="Index" asp-controller="Build" class="btn btn-outline-dark">Cancel</a>
</form>